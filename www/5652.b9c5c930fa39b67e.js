"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5652],{7423:(ee,$,p)=>{p.d($,{Uw:()=>R,fo:()=>F});var h=p(5861);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var C=(()=>{return(c=C||(C={})).Unimplemented="UNIMPLEMENTED",c.Unavailable="UNAVAILABLE",C;var c})();class y extends Error{constructor(o,a,f){super(o),this.message=o,this.code=a,this.data=f}}const _=c=>{var o,a,f,v,u;const k=c.CapacitorCustomPlatform||null,m=c.Capacitor||{},x=m.Plugins=m.Plugins||{},P=c.CapacitorPlatforms,d=(null===(o=null==P?void 0:P.currentPlatform)||void 0===o?void 0:o.getPlatform)||(()=>null!==k?k.name:(c=>{var o,a;return null!=c&&c.androidBridge?"android":null!==(a=null===(o=null==c?void 0:c.webkit)||void 0===o?void 0:o.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(c)),n=(null===(a=null==P?void 0:P.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==d()),s=(null===(f=null==P?void 0:P.currentPlatform)||void 0===f?void 0:f.isPluginAvailable)||(D=>{const O=ce.get(D);return!!(null!=O&&O.platforms.has(d())||B(D))}),B=(null===(v=null==P?void 0:P.currentPlatform)||void 0===v?void 0:v.getPluginHeader)||(D=>{var O;return null===(O=m.PluginHeaders)||void 0===O?void 0:O.find(q=>q.name===D)}),ce=new Map,fe=(null===(u=null==P?void 0:P.currentPlatform)||void 0===u?void 0:u.registerPlugin)||((D,O={})=>{const q=ce.get(D);if(q)return console.warn(`Capacitor plugin "${D}" already registered. Cannot register plugins twice.`),q.proxy;const z=d(),Q=B(D);let I;const Ce=function(){var A=(0,h.Z)(function*(){return!I&&z in O?I=I="function"==typeof O[z]?yield O[z]():O[z]:null!==k&&!I&&"web"in O&&(I=I="function"==typeof O.web?yield O.web():O.web),I});return function(){return A.apply(this,arguments)}}(),le=A=>{let N;const j=(...G)=>{const Y=Ce().then(L=>{const H=((A,N)=>{var j,G;if(!Q){if(A)return null===(G=A[N])||void 0===G?void 0:G.bind(A);throw new y(`"${D}" plugin is not implemented on ${z}`,C.Unimplemented)}{const Y=null==Q?void 0:Q.methods.find(L=>N===L.name);if(Y)return"promise"===Y.rtype?L=>m.nativePromise(D,N.toString(),L):(L,H)=>m.nativeCallback(D,N.toString(),L,H);if(A)return null===(j=A[N])||void 0===j?void 0:j.bind(A)}})(L,A);if(H){const X=H(...G);return N=null==X?void 0:X.remove,X}throw new y(`"${D}.${A}()" is not implemented on ${z}`,C.Unimplemented)});return"addListener"===A&&(Y.remove=(0,h.Z)(function*(){return N()})),Y};return j.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(j,"name",{value:A,writable:!1,configurable:!1}),j},ue=le("addListener"),ge=le("removeListener"),_e=(A,N)=>{const j=ue({eventName:A},N),G=function(){var L=(0,h.Z)(function*(){const H=yield j;ge({eventName:A,callbackId:H},N)});return function(){return L.apply(this,arguments)}}(),Y=new Promise(L=>j.then(()=>L({remove:G})));return Y.remove=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield G()}),Y},de=new Proxy({},{get(A,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Q?_e:ue;case"removeListener":return ge;default:return le(N)}}});return x[D]=de,ce.set(D,{name:D,proxy:de,platforms:new Set([...Object.keys(O),...Q?[z]:[]])}),de});return m.convertFileSrc||(m.convertFileSrc=D=>D),m.getPlatform=d,m.handleError=D=>c.console.error(D),m.isNativePlatform=n,m.isPluginAvailable=s,m.pluginMethodNoop=(D,O,q)=>Promise.reject(`${q} does not have an implementation of "${O}".`),m.registerPlugin=fe,m.Exception=y,m.DEBUG=!!m.DEBUG,m.isLoggingEnabled=!!m.isLoggingEnabled,m.platform=m.getPlatform(),m.isNative=m.isNativePlatform(),m},T=(c=>c.Capacitor=_(c))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),F=T.registerPlugin;class R{constructor(o){this.listeners={},this.windowListeners={},o&&(console.warn(`Capacitor WebPlugin "${o.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=o)}addListener(o,a){var f=this;this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(a);const u=this.windowListeners[o];u&&!u.registered&&this.addWindowListener(u);const k=function(){var x=(0,h.Z)(function*(){return f.removeListener(o,a)});return function(){return x.apply(this,arguments)}}(),m=Promise.resolve({remove:k});return Object.defineProperty(m,"remove",{value:(x=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),function(){return x.apply(this,arguments)})}),m;var x}removeAllListeners(){var o=this;return(0,h.Z)(function*(){o.listeners={};for(const a in o.windowListeners)o.removeWindowListener(o.windowListeners[a]);o.windowListeners={}})()}notifyListeners(o,a){const f=this.listeners[o];f&&f.forEach(v=>v(a))}hasListeners(o){return!!this.listeners[o].length}registerWindowListener(o,a){this.windowListeners[a]={registered:!1,windowEventName:o,pluginEventName:a,handler:f=>{this.notifyListeners(a,f)}}}unimplemented(o="not implemented"){return new T.Exception(o,C.Unimplemented)}unavailable(o="not available"){return new T.Exception(o,C.Unavailable)}removeListener(o,a){var f=this;return(0,h.Z)(function*(){const v=f.listeners[o];if(!v)return;const u=v.indexOf(a);f.listeners[o].splice(u,1),f.listeners[o].length||f.removeWindowListener(f.windowListeners[o])})()}addWindowListener(o){window.addEventListener(o.windowEventName,o.handler),o.registered=!0}removeWindowListener(o){!o||(window.removeEventListener(o.windowEventName,o.handler),o.registered=!1)}}const M=c=>encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class te extends R{setCookie(o){return(0,h.Z)(function*(){try{const a=M(o.key),f=M(o.value),v=`; expires=${(o.expires||"").replace("expires=","")}`,u=(o.path||"/").replace("path=","");document.cookie=`${a}=${f||""}${v}; path=${u}`}catch(a){return Promise.reject(a)}})()}deleteCookie(o){return(0,h.Z)(function*(){try{document.cookie=`${o.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}})()}clearCookies(){return(0,h.Z)(function*(){try{const o=document.cookie.split(";")||[];for(const a of o)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(o){return Promise.reject(o)}})()}clearAllCookies(){var o=this;return(0,h.Z)(function*(){try{yield o.clearCookies()}catch(a){return Promise.reject(a)}})()}}F("CapacitorCookies",{web:()=>new te});const ne=function(){var c=(0,h.Z)(function*(o){return new Promise((a,f)=>{const v=new FileReader;v.onload=()=>{const u=v.result;a(u.indexOf(",")>=0?u.split(",")[1]:u)},v.onerror=u=>f(u),v.readAsDataURL(o)})});return function(a){return c.apply(this,arguments)}}();class se extends R{request(o){return(0,h.Z)(function*(){const a=((c,o={})=>{const a=Object.assign({method:c.method||"GET",headers:c.headers},o),v=((c={})=>{const o=Object.keys(c);return Object.keys(c).map(v=>v.toLocaleLowerCase()).reduce((v,u,k)=>(v[u]=c[o[k]],v),{})})(c.headers)["content-type"]||"";if("string"==typeof c.data)a.body=c.data;else if(v.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[k,m]of Object.entries(c.data||{}))u.set(k,m);a.body=u.toString()}else if(v.includes("multipart/form-data")){const u=new FormData;if(c.data instanceof FormData)c.data.forEach((m,x)=>{u.append(x,m)});else for(const m of Object.keys(c.data))u.append(m,c.data[m]);a.body=u;const k=new Headers(a.headers);k.delete("content-type"),a.headers=k}else(v.includes("application/json")||"object"==typeof c.data)&&(a.body=JSON.stringify(c.data));return a})(o,o.webFetchExtra),f=((c,o=!0)=>c?Object.entries(c).reduce((f,v)=>{const[u,k]=v;let m,x;return Array.isArray(k)?(x="",k.forEach(P=>{m=o?encodeURIComponent(P):P,x+=`${u}=${m}&`}),x.slice(0,-1)):(m=o?encodeURIComponent(k):k,x=`${u}=${m}`),`${f}&${x}`},"").substr(1):null)(o.params,o.shouldEncodeUrlParams),v=f?`${o.url}?${f}`:o.url,u=yield fetch(v,a),k=u.headers.get("content-type")||"";let x,P,{responseType:m="text"}=u.ok?o:{};switch(k.includes("application/json")&&(m="json"),m){case"arraybuffer":case"blob":P=yield u.blob(),x=yield ne(P);break;case"json":x=yield u.json();break;default:x=yield u.text()}const i={};return u.headers.forEach((d,t)=>{i[t]=d}),{data:x,headers:i,status:u.status,url:u.url}})()}get(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"GET"}))})()}post(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"POST"}))})()}put(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"PUT"}))})()}patch(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"PATCH"}))})()}delete(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"DELETE"}))})()}}F("CapacitorHttp",{web:()=>new se})},2181:(ee,$,p)=>{p.d($,{o:()=>E});var h=p(520);class e{}var l=p(2096);let E=(()=>{class b{constructor(g){this.http=g;const C=new Date;this.currentYear=C.getFullYear(),this.currentMonthIndex=C.getMonth()}getHttpData(g,C){console.log("calSvc-gethttpdata entered");const y=11===g?C+1:C,w=11===g?0:g+1,_={message:"MonthDiary",email:"test@test.com",StartDate:this.getDateFormatted(new Date(C,g,1)),EndDate:this.getDateFormatted(new Date(y,w,0))};return this.http.post("/api/MonthDiary/",_,{headers:(new h.WM).set("Content-Type","application/json")})}getData(g=this.currentMonthIndex,C=this.currentYear){console.log("getdata entered");const y=[];return this.getHttpData(g,C).subscribe(w=>{console.log(w),console.log("getdata",g,C,w);for(const _ of w){const J=new Date(_.date),T={date:J,year:J.getFullYear(),monthIndex:J.getMonth(),weekDayNumber:J.getDay(),dayNumber:J.getDate(),feelings:JSON.parse(_.feelings.replace(/'/g,'"'))};y.push(T)}console.log("getDatabottom",y)}),console.log("getData return"),y}getCurrentMonth(g=this.currentMonthIndex,C=this.currentYear){return this.getMonth(g,C)}getMonth(g=this.currentMonthIndex,C=this.currentYear){const y=[],w=this.createDay(C,g,1),_=0===g?C-1:C,J=0===g?11:g-1,T=11===g?C+1:C,F=11===g?0:g+1;let U=new Date(C,g,0).getDate();const V=new Date(C,g+1,0).getDate();for(let S=1;S<w.weekDayNumber;S++){const M=new e;M.date=new Date(_,J,U),M.year=_,M.monthIndex=J,M.weekDayNumber=S,M.dayNumber=U,M.feelings=["none","none","none"],y.unshift(M),U--}y.push(w);for(let S=2;S<=V;S++)y.push(this.createDay(C,g,S));let R=1;for(let S=y[y.length-1].weekDayNumber+1;S<=7;S++){const M=new e;7===S?(M.date=new Date(T,F,y[y.length-1].dayNumber+1),M.year=T,M.monthIndex=F,M.weekDayNumber=0,M.dayNumber=R,M.feelings=["none","none","none"]):(M.date=new Date(T,F,R),M.year=T,M.monthIndex=F,M.weekDayNumber=S,M.dayNumber=R,M.feelings=["none","none","none"],R++),y.push(M)}return console.log("getmonth",y),y}getMonthName(g){switch(g+1){case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"10";case 11:return"11";case 12:return"12";default:return"|"+g}}getWeekDayName(g){switch(g){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return""}}setData(g,C){g&&(g.feelings=C)}getDateFormatted(g){return`${g.getFullYear()}-${("0"+(1+g.getMonth())).slice(-2)}-${("0"+g.getDate()).slice(-2)}`}createDay(g,C,y){const w=new e;return w.date=new Date(g,C,y),w.year=g,w.monthIndex=C,w.weekDayNumber=0===w.date.getDay()?7:w.date.getDay(),w.dayNumber=y,w.feelings=["none","none","none"],w.summary="",w.diary=[],w.keywords=[],w.recording={},w}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(h.eN))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},2561:(ee,$,p)=>{p.d($,{m:()=>P});var h=p(655),e=p(2096),l=p(7590),E=p(9808);function b(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.selectFeeling(r))}),e._UZ(1,"ion-img",6),e.TgZ(2,"p"),e._uU(3),e.qZA()()}if(2&i){const t=d.$implicit,n=d.index,r=e.oxw();e.xp6(1),e.MGl("src","./assets/feeling/",t,".svg"),e.xp6(2),e.Oqu(r.feelings[n])}}let K=(()=>{class i{constructor(t,n){this.popoverCtrl=t,this.journalCreator=n,this.imgList=this.journalCreator.getImgList,this.feelings=this.journalCreator.getFeelings}ngOnInit(){0===this.time?this.timeStr="\uccab\ubc88\uc9f8":1===this.time?this.timeStr="\ub450\ubc88\uc9f8":2===this.time&&(this.timeStr="\uc138\ubc88\uc9f8")}deleteFeeling(){this.popoverCtrl.dismiss({feeling:"none",time:this.time},"confirm")}selectFeeling(t){const n=t.target;if(n.closest("div")){const s=n.closest("div").children[0].src.slice(16,-4),Z=this.journalCreator.getFeelingName(s);this.popoverCtrl.dismiss({feeling:s,time:this.time,name:Z},"confirm")}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.Dh),e.Y36(P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-set-feeling"]],inputs:{time:"time"},decls:10,vars:2,consts:[[1,"popoverContainer","ion-padding"],[1,"popoverHeader"],["src","./assets/feel_tab.svg",1,"imgContainer"],[1,"customBtn",3,"click"],["class","feelContainer",3,"click",4,"ngFor","ngForOf"],[1,"feelContainer",3,"click"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div"),e._UZ(3,"ion-img",2),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"button",3),e.NdJ("click",function(){return n.deleteFeeling()}),e._uU(7,"X"),e.qZA()(),e.TgZ(8,"div"),e.YNc(9,b,4,2,"div",4),e.qZA()()),2&t&&(e.xp6(5),e.hij(" \uc624\ub298 ",n.timeStr," \uae30\ubd84\uc740 \uc5b4\ub5a4\uac00\uc694? "),e.xp6(4),e.Q6J("ngForOf",n.imgList))},dependencies:[E.sg,l.W2,l.Xz],styles:[".popoverHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.popoverHeader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.popoverHeader[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]{margin-right:0}.popoverHeader[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]:hover{color:var(--red-color)}.popoverHeader[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{width:250px;margin:auto}.imgContainer[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px}.feelContainer[_ngcontent-%COMP%]{width:50px;height:60px;display:inline-block;margin:5px}.feelContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.feelContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin:auto;width:40px;height:40px}.feelContainer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:13px;color:#7e7e7e}"]}),i})();var g=p(913),C=p(7423),y=(()=>{return(i=y||(y={})).Documents="DOCUMENTS",i.Data="DATA",i.Library="LIBRARY",i.Cache="CACHE",i.External="EXTERNAL",i.ExternalStorage="EXTERNAL_STORAGE",y;var i})();const T=(0,C.fo)("Filesystem",{web:()=>p.e(6364).then(p.bind(p,6364)).then(i=>new i.FilesystemWeb)}),F=(0,C.fo)("VoiceRecorder",{web:()=>p.e(797).then(p.bind(p,797)).then(i=>new i.VoiceRecorderWeb)});var U=p(520);let V=(()=>{class i{constructor(t){this.http=t}addRecording(t){return(0,h.mG)(this,void 0,void 0,function*(){const n=new File([t],"my-file.webm",{type:"audio/webm"}),r=new DataTransfer;r.items.add(n),console.log(r.files[0]);const s=new FormData;s.append("message","stt_analysis"),s.append("client_id","client1@test.com"),s.append("couns_id","1234"),s.append("file",r.files[0]),console.log("click"),new U.WM({"MIME-Type":"audio/webm"}),this.http.post("https://192.168.31.35/SttAnalysis/",s).toPromise().then(B=>(console.log(B),B)).catch(B=>{console.log(B)})})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(U.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function R(i,d){1&i&&e._UZ(0,"ion-img",11),2&i&&e.MGl("src","./assets/feeling/",d.$implicit,".svg")}function S(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onPlayClicked())}),e._UZ(1,"ion-icon",13),e.qZA()}}function M(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onPauseClicked())}),e._UZ(1,"ion-icon",15),e.qZA()}}let te=(()=>{class i{constructor(t,n,r){this.media=t,this.modalCtrl=n,this.recordService=r,this.imgList=["happy","soso","good","excite","great","uneasy","sad","not_good","lonely","depressed","surprise","upset","unpleasant"],this.feelings=[],this.numbers=[],this.isRecording=!1,this.isPaused=!1,this.storedFileNames=[],this.duration=0,this.durationDisplay="0.00",this.interval=null,this.recordData=null}ngOnInit(){for(let t=0;t<3;t++){let n=this.getRandomInt(this.imgList.length);for(;this.numbers.includes(n);)n=this.getRandomInt(this.imgList.length);this.feelings.push(this.imgList[n]),this.numbers.push(n)}this.loadFiles(),F.requestAudioRecordingPermission()}getRandomInt(t){return Math.floor(Math.random()*t)}timeCalc(){if(this.isPaused)return;if(!this.isRecording)return this.duration=0,void(this.durationDisplay="0.00");this.duration+=1;const t=Math.floor(this.duration/60),n=(this.duration%60).toString().padStart(2,"0");this.durationDisplay=t+":"+n,setTimeout(()=>{this.timeCalc()},1e3)}onPlayClicked(){if(!this.isRecording){if(!this.isRecording&&this.isPaused)return this.isRecording=!0,this.isPaused=!1,this.timeCalc(),F.resumeRecording();this.isRecording=!0,F.startRecording(),this.timeCalc()}}onPauseClicked(){this.isPaused||(clearInterval(this.interval),this.isRecording=!1,this.isPaused=!0,F.pauseRecording())}onStopClicked(){!this.isRecording||(clearInterval(this.interval),this.isRecording=!1,this.timeCalc(),F.stopRecording().then(t=>(0,h.mG)(this,void 0,void 0,function*(){if(t.value&&t.value.recordDataBase64){const n=t.value.recordDataBase64;console.log(t.value.mimeType),this.recordData=n;const s=(new Date).getTime()+".wav";yield T.writeFile({path:s,directory:y.Data,data:n}),this.loadFiles(),this.sendRecord()}})))}playFile(t){return(0,h.mG)(this,void 0,void 0,function*(){const r=(yield T.readFile({path:t.name,directory:y.Data})).data,s=new Audio(`data:audio/webm;base64,${r}`);this.recordData=s.src,console.log(this.recordData),s.oncanplaythrough=()=>s.play(),s.load()})}loadFiles(){return(0,h.mG)(this,void 0,void 0,function*(){T.readdir({path:"",directory:y.Data}).then(t=>{console.log("load",t.files[0]),this.storedFileNames=t.files})})}sendRecord(){return(0,h.mG)(this,void 0,void 0,function*(){const t=yield this.recordService.addRecording(this.recordData);yield this.modalCtrl.dismiss(t,"confirm")})}onFileUpload(t){const r=t.currentTarget.files;console.log(r),r&&this.recordService.addRecording(r[0])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.pU),e.Y36(l.IN),e.Y36(V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recording"]],decls:18,vars:5,consts:[[1,"ion-padding"],[1,"imgContainer","ion-padding"],["src","./assets/feel_tab.svg"],[3,"src",4,"ngFor","ngForOf"],[1,"ion-text-center"],[1,"dFlex"],["color","custom","shape","circle",1,"stopBtn",3,"disabled","click"],["slot","icon-only","size","large","name","stop"],["class","playBtn","size","large","color","custom","shape","circle",3,"click",4,"ngIf"],["class","pauseBtn","size","large","color","custom","shape","circle",3,"click",4,"ngIf"],[1,"redDot"],[3,"src"],["size","large","color","custom","shape","circle",1,"playBtn",3,"click"],["slot","icon-only","name","play","size","large"],["size","large","color","custom","shape","circle",1,"pauseBtn",3,"click"],["slot","icon-only","name","pause","size","large"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1),e._UZ(2,"ion-img",2),e.YNc(3,R,1,1,"ion-img",3),e.qZA(),e.TgZ(4,"p",4),e._uU(5,"\uc624\ub298 \ud558\ub8e8\ub97c \uae30\ub85d \uc911\uc774\uc608\uc694 :)"),e.qZA(),e.TgZ(6,"ion-grid")(7,"ion-row")(8,"ion-col",5)(9,"ion-button",6),e.NdJ("click",function(){return n.onStopClicked()}),e._UZ(10,"ion-icon",7),e.qZA()(),e.TgZ(11,"ion-col",5),e.YNc(12,S,2,0,"ion-button",8),e.YNc(13,M,2,0,"ion-button",9),e.qZA(),e.TgZ(14,"ion-col",5),e._UZ(15,"div",10),e.TgZ(16,"p"),e._uU(17),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.feelings),e.xp6(6),e.Q6J("disabled",!n.isRecording),e.xp6(3),e.Q6J("ngIf",!n.isRecording),e.xp6(1),e.Q6J("ngIf",n.isRecording),e.xp6(4),e.Oqu(n.durationDisplay))},dependencies:[E.sg,E.O5,l.YG,l.wI,l.W2,l.jY,l.gu,l.Xz,l.Nd],styles:[".imgContainer[_ngcontent-%COMP%]{margin:20px auto;width:100px;height:70px;position:relative}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{position:absolute;width:30%;height:30%}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(1){width:60%;height:60%;bottom:0;left:18px}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(2){top:20px;left:-10px}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(3){top:0;right:35px}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(4){bottom:15px;right:-10px}.redDot[_ngcontent-%COMP%]{width:5px;height:5px;border-radius:50%;background-color:red;margin-right:5px}"]}),i})();var W=p(4182);const ne=["inputEl"];function oe(i,d){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.show)}}let ie=(()=>{class i{constructor(t){this.popoverCtrl=t,this.show=!1,this.keywordVal=""}ngOnInit(){console.log(document.activeElement)}ngAfterViewInit(){setTimeout(()=>{this.inputEl.setFocus()},100)}chkDuplication(){return this.keywordVal.trim().length<1?(this.show="\ud55c \uae00\uc790 \uc774\uc0c1\uc758 \ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",!1):!this.keywords.includes(this.keywordVal)||(this.show="\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ud0a4\uc6cc\ub4dc\uc785\ub2c8\ub2e4.",!1)}onKeyPress(t){if(this.show=!1,"Enter"===t.key&&this.chkDuplication())return this.onAdd()}onCancel(){this.popoverCtrl.dismiss(null,"cancel")}onAdd(){this.chkDuplication()&&(this.inputEl.value="",this.keywords.push(this.keywordVal))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.Dh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-keyword"]],viewQuery:function(t,n){if(1&t&&e.Gf(ne,5),2&t){let r;e.iGM(r=e.CRH())&&(n.inputEl=r.first)}},inputs:{keywords:"keywords"},decls:11,vars:2,consts:[[1,"ion-padding"],[1,"w100"],[1,"customBtn","closeBtn",3,"click"],[1,"mainDiv"],[1,"inputDiv"],["placeholder","\ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694","autofocus","",3,"ngModel","ngModelChange","keypress"],["inputEl",""],[4,"ngIf"],[1,"customBtn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"span",1)(2,"button",2),e.NdJ("click",function(){return n.onCancel()}),e._uU(3," X "),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"ion-input",5,6),e.NdJ("ngModelChange",function(s){return n.keywordVal=s})("keypress",function(s){return n.onKeyPress(s)}),e.qZA(),e.YNc(8,oe,2,1,"p",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.onAdd()}),e._uU(10," \ub354\ud558\uae30 "),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngModel",n.keywordVal),e.xp6(2),e.Q6J("ngIf",n.show))},dependencies:[E.O5,W.JJ,W.On,l.W2,l.pK,l.j9],styles:["span.w100[_ngcontent-%COMP%]{display:block;text-align:right}.closeBtn[_ngcontent-%COMP%]{margin-top:-5px;padding:0}.closeBtn[_ngcontent-%COMP%]:hover{color:var(--red-color)}.mainDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mainDiv[_ngcontent-%COMP%]   .inputDiv[_ngcontent-%COMP%]{width:100%}.mainDiv[_ngcontent-%COMP%]   .inputDiv[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-left:8px;font-size:14px;color:var(--dark-gray-color)}.mainDiv[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]{width:60px;padding:10px 5px;margin:0}.mainDiv[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]:hover{color:var(--active-color)}ion-input[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:15px}ion-input[_ngcontent-%COMP%]:focus-within{border-color:var(--middle-purple-color);color:#000}"]}),i})();const re=["inputEl"];let se=(()=>{class i{constructor(t){this.modalCtrl=t,this.val=""}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.inputEl.setFocus();for(const t of this.diary)this.val+=t.sentence+" "},100)}onCancel(){this.modalCtrl.dismiss(null,"cancel")}onSave(){this.modalCtrl.dismiss(this.val,"confirm")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-writing"]],viewQuery:function(t,n){if(1&t&&e.Gf(re,5),2&t){let r;e.iGM(r=e.CRH())&&(n.inputEl=r.first)}},inputs:{diary:"diary"},decls:11,vars:1,consts:[[1,"ion-padding"],[3,"click"],["autoGrow","","placeholder","\uc624\ub298\uc758 \uc77c\uae30\ub97c \uc791\uc131\ud574\uc8fc\uc138\uc694.",3,"ngModel","ngModelChange"],["inputEl",""]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"p"),e._uU(2," \uc9c1\uc811 \uc791\uc131\ud558\uae30 "),e.qZA(),e.TgZ(3,"ion-buttons")(4,"ion-button",1),e.NdJ("click",function(){return n.onCancel()}),e._uU(5,"\ucde8\uc18c"),e.qZA(),e.TgZ(6,"ion-button",1),e.NdJ("click",function(){return n.onSave()}),e._uU(7,"\uc800\uc7a5"),e.qZA()()(),e.TgZ(8,"ion-content")(9,"ion-textarea",2,3),e.NdJ("ngModelChange",function(s){return n.val=s}),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.val))},dependencies:[W.JJ,W.On,l.YG,l.Sm,l.W2,l.Gu,l.g2,l.j9],styles:["ion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),i})();var ae=p(2181);function c(i,d){1&i&&e._UZ(0,"ion-icon",28)}function o(i,d){if(1&i&&e._UZ(0,"ion-img",29),2&i){const t=e.oxw().$implicit;e.MGl("src","./assets/feeling/",t,".svg")}}function a(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-col",21)(1,"ion-card",22),e.NdJ("click",function(r){const Z=e.CHM(t).index,B=e.oxw();return e.KtG(B.onSetFeeling(r,Z))}),e.TgZ(2,"p",23),e._uU(3),e.qZA(),e.TgZ(4,"div",24),e.YNc(5,c,1,0,"ion-icon",25),e.YNc(6,o,1,1,"ion-img",26),e.qZA(),e.TgZ(7,"p",27),e._uU(8),e.qZA()()()}if(2&i){const t=d.$implicit,n=d.index,r=e.oxw();e.xp6(1),e.Q6J("id","timeCard"+n),e.xp6(2),e.Oqu(0===n?"\uccab\ubc88\uc9f8":1===n?"\ub450\ubc88\uc9f8":"\uc138\ubc88\uc9f8"),e.xp6(1),e.ekj("iconBack","none"===t),e.xp6(1),e.Q6J("ngIf","none"===t),e.xp6(1),e.Q6J("ngIf","none"!==t),e.xp6(2),e.Oqu(r.feelNames[n])}}function f(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-row",31)(1,"div",32),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",33)(4,"ion-input",34),e.NdJ("ngModelChange",function(r){const Z=e.CHM(t).index,B=e.oxw(2);return e.KtG(B.diary[Z].sentence=r)}),e.qZA()(),e.TgZ(5,"ion-col",35)(6,"button",36),e.NdJ("click",function(){const s=e.CHM(t).$implicit,Z=e.oxw(2);return e.KtG(Z.onSentDelete(s))}),e._uU(7,"X"),e.qZA()()()}if(2&i){const t=d.$implicit,n=d.index,r=e.oxw(2);e.xp6(2),e.hij(" ",t.time," "),e.xp6(2),e.Q6J("ngModel",r.diary[n].sentence)}}function v(i,d){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,f,8,2,"ion-row",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.diary)}}function u(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-badge",38),e.NdJ("click",function(){const s=e.CHM(t).$implicit,Z=e.oxw(2);return e.KtG(Z.onBadgeClicked(s))}),e._uU(1),e.qZA()}if(2&i){const t=d.$implicit;e.xp6(1),e.hij(" ",t," ")}}function k(i,d){if(1&i&&(e.TgZ(0,"span"),e.YNc(1,u,2,1,"ion-badge",37),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.keywords)}}let m=(()=>{class i{constructor(t,n,r,s,Z,B){this.journalCreator=t,this.modalCtrl=n,this.calendarService=r,this.popoverCtrl=s,this.actionSheetCtrl=Z,this.alertController=B,this.year=0,this.month="",this.dayNumber=1,this.feelings=["none","none","none"],this.feelNames=["\uc120\ud0dd\ud574\uc8fc\uc138\uc694","\uc120\ud0dd\ud574\uc8fc\uc138\uc694","\uc120\ud0dd\ud574\uc8fc\uc138\uc694"],this.summary="",this.diary=[],this.keywords=[],this.feelingList=this.journalCreator.getFeelings}ngOnInit(){this.feelings=this.day.feelings.slice();for(let t=0;t<this.feelings.length;t++)this.feelNames[t]=this.journalCreator.getFeelingName(this.feelings[t]);this.month=this.calendarService.getMonthName(this.day.monthIndex),this.summary=this.day.summary||"",this.diary=this.day.diary||null,this.keywords=this.day.keywords||[]}ngAfterViewInit(){}alertDismiss(t){return(0,h.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:t,buttons:[{text:"\ucde8\uc18c",role:"cancel"},{text:"\ud655\uc778",role:"confirm"}]});yield n.present();const{role:r}=yield n.onDidDismiss();return r})}onCancel(){return(0,h.mG)(this,void 0,void 0,function*(){"confirm"===(yield this.alertDismiss("\uc800\uc7a5\ud558\uc9c0 \uc54a\uace0 \ub098\uac00\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))?this.modalCtrl.dismiss(null,"cancel"):console.log("canceled")})}onJournalConfirm(){return(0,h.mG)(this,void 0,void 0,function*(){this.modalCtrl.dismiss({date:this.day.date,dayNumber:this.day.dayNumber,year:this.day.year,monthIndex:this.day.monthIndex,weekDayNumber:this.day.weekDayNumber,feelings:this.feelings,summary:this.summary,diary:this.diary,keywords:this.keywords,recording:this.day.recording,isShare:this.checked},"confirm")})}onRecording(){this.modalCtrl.create({component:te,cssClass:"recordingModal dFlex",breakpoints:[0,.5,.7],initialBreakpoint:.5}).then(t=>(t.present(),t.onDidDismiss())).then(t=>{console.log(t);const n=t.data;for(const r of n.sentence)this.diary.push({time:r.start,sentence:r.sentence});this.keywords.push(n.sentimental[0].senti),this.keywords=[...new Set(this.keywords)],this.keywords.length>10&&(this.journalCreator.presentToast("\ud0a4\uc6cc\ub4dc\ub294 \ucd5c\ub300 10\uac1c\uae4c\uc9c0 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),this.keywords=[...this.keywords].slice(0,10),console.log(this.keywords))})}onSentDelete(t){this.diary=this.diary.filter(n=>n!==t)}writeDiary(){this.modalCtrl.create({component:se,componentProps:{diary:this.diary},cssClass:"writingModal dFlex",breakpoints:[0,.5,.9],initialBreakpoint:.5}).then(t=>(t.present(),t.onDidDismiss())).then(t=>{"confirm"===t.role&&this.diary.push({time:0,sentence:t.data})})}onSummaryFocus(t){}onSetFeeling(t,n){let r=t.target;t.target.classList.contains("timeCard")||(r=t.target.closest(".timeCard")),this.popoverCtrl.create({component:K,componentProps:{time:n},cssClass:"set-feeling-popover",event:t,translucent:!0,trigger:`timeCard${n}`,reference:"trigger",alignment:"center",mode:"md"}).then(s=>(s.present(),s.onDidDismiss())).then(s=>{"confirm"===s.role&&(console.log(s.data),this.feelings[s.data.time]=s.data.feeling,this.feelNames[s.data.time]=s.data.name)})}onKeywordCreate(t){this.popoverCtrl.create({component:ie,componentProps:{keywords:this.keywords},cssClass:"add-keyword-popover",event:t,translucent:!0,alignment:"center",mode:"md"}).then(n=>(n.present(),n.onDidDismiss())).then(n=>{"confirm"===n.role&&console.log(this.keywords),console.log(n)})}onBadgeClicked(t){this.keywords=this.keywords.filter(n=>n!==t)}onShare(){this.checked&&this.journalCreator.presentToast("\uc624\ub298\uc758 \uc77c\uae30 \uc804\uccb4 \ub0b4\uc6a9\uc740 \uc81c\uc678\ud558\uace0 \uacf5\uc720\ub3fc\uc694.")}presentActionSheet(){return(0,h.mG)(this,void 0,void 0,function*(){const t=yield this.actionSheetCtrl.create({header:`${this.day.year}/${this.month}/${this.day.dayNumber}\uc758 \uc77c\uae30\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?`,buttons:[{text:"Delete",role:"destructive",data:{action:"delete"}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}],mode:"ios"});yield t.present(),"destructive"===(yield t.onDidDismiss()).role&&this.deleteDiary()})}deleteDiary(){this.feelings=["none","none","none"],this.diary=[],this.keywords=[],this.summary="",this.day.feelings=["none","none","none"],this.day.summary="",this.day.diary=[],this.day.keywords=[],this.day.recording={},this.onJournalConfirm()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P),e.Y36(l.IN),e.Y36(ae.o),e.Y36(l.Dh),e.Y36(l.BX),e.Y36(l.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-journal"]],inputs:{day:"day"},decls:44,vars:9,consts:[["slot","start"],["defaultHref","/tabs/tab2",3,"click"],["slot","end",1,"container"],["color","custom","enable-on-off-labels","\uacf5\uc720",1,"px-0",3,"ngModel","ngModelChange","ionChange"],["shape","round",1,"trashBtn",3,"click"],["name","trash-bin-outline"],[1,"ion-margin"],["class","w100 ion-no-margin",4,"ngFor","ngForOf"],[1,"ion-padding","w100"],[1,"textBlack"],[1,"ion-no-padding"],["id","summary","placeholder","\uc624\ub298\uc758 \uc77c\uae30\ub97c \ub179\uc74c \ud6c4 \ud3b8\uc9d1\ud560 \uc218 \uc788\uc5b4\uc694","value","summary",3,"disabled","ngModel","ngModelChange","ionFocus"],[4,"ngIf"],[1,"ion-justify-content-center","diaryBtns"],["shape","round","fill","solid","color","medium",1,"diaryBtn",3,"click"],["src","./assets/write_w.svg"],["src","./assets/recording_w.svg"],[1,"dFlex","ion-wrap","keywordBadges"],["name","add-circle","size","large","color","medium",1,"keywordIcon",3,"click"],[1,"dFlex"],["shape","round","color","custom",3,"click"],[1,"w100","ion-no-margin"],[1,"ion-padding","ion-no-margin","timeCard",3,"id","click"],[1,"ion-text-center","textBlack"],[1,"imgContainer","dFlex","feelingDiv"],["name","add-circle","size","large","color","medium",4,"ngIf"],[3,"src",4,"ngIf"],[1,"ion-text-center",2,"font-size","13px"],["name","add-circle","size","large","color","medium"],[3,"src"],["id","diary",4,"ngFor","ngForOf"],["id","diary"],[1,"ion-padding-horizontal","ion-margin-end","w100","diaryTime"],["size","10"],["value","sent.diary",3,"ngModel","ngModelChange"],["size","2"],[1,"customBtn",3,"click"],["size","large","class","keywordBadge",3,"click",4,"ngFor","ngForOf"],["size","large",1,"keywordBadge",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-back-button",1),e.NdJ("click",function(){return n.onCancel()}),e.qZA()(),e.TgZ(4,"ion-title"),e._uU(5),e.qZA(),e.TgZ(6,"ion-buttons",2),e._uU(7," \uacf5\uc720 "),e.TgZ(8,"ion-toggle",3),e.NdJ("ngModelChange",function(s){return n.checked=s})("ionChange",function(){return n.onShare()}),e.qZA(),e.TgZ(9,"ion-button",4),e.NdJ("click",function(){return n.presentActionSheet()}),e._UZ(10,"ion-icon",5),e.qZA()()()(),e.TgZ(11,"ion-content")(12,"ion-grid")(13,"ion-row",6),e.YNc(14,a,9,7,"ion-col",7),e.qZA(),e.TgZ(15,"ion-row")(16,"ion-card",8)(17,"p",9),e._uU(18,"\ud55c \uc904 \uc77c\uae30"),e.qZA(),e.TgZ(19,"ion-card-content",10)(20,"ion-input",11),e.NdJ("ngModelChange",function(s){return n.summary=s})("ionFocus",function(s){return n.onSummaryFocus(s)}),e.qZA()()()(),e.TgZ(21,"ion-row")(22,"ion-card",8)(23,"p",9),e._uU(24,"\uc624\ub298\uc758 \uc77c\uae30"),e.qZA(),e.TgZ(25,"ion-card-content",10),e.YNc(26,v,2,1,"div",12),e.TgZ(27,"ion-buttons",13)(28,"ion-button",14),e.NdJ("click",function(){return n.writeDiary()}),e._UZ(29,"ion-img",15),e._uU(30," \ubc14\ub85c \uc791\uc131\ud558\uae30 "),e.qZA(),e.TgZ(31,"ion-button",14),e.NdJ("click",function(){return n.onRecording()}),e._UZ(32,"ion-img",16),e._uU(33," \ub179\uc74c\ud558\uae30 "),e.qZA()()()()(),e.TgZ(34,"ion-row")(35,"ion-card",8)(36,"p",9),e._uU(37,"\ud0a4\uc6cc\ub4dc"),e.qZA(),e.TgZ(38,"span",17),e.YNc(39,k,2,1,"span",12),e.TgZ(40,"ion-icon",18),e.NdJ("click",function(s){return n.onKeywordCreate(s)}),e.qZA()()()()()(),e.TgZ(41,"ion-footer",19)(42,"ion-button",20),e.NdJ("click",function(){return n.onJournalConfirm()}),e._uU(43," \uc800\uc7a5\ud558\uae30 "),e.qZA()()),2&t&&(e.xp6(5),e.lnq("",n.day.year,"\ub144 ",n.month,"\uc6d4 ",n.day.dayNumber,"\uc77c"),e.xp6(3),e.Q6J("ngModel",n.checked),e.xp6(6),e.Q6J("ngForOf",n.feelings),e.xp6(6),e.Q6J("disabled",!n.summary)("ngModel",n.summary),e.xp6(6),e.Q6J("ngIf",n.diary),e.xp6(13),e.Q6J("ngIf",n.keywords))},dependencies:[E.sg,E.O5,W.JJ,W.On,l.oU,l.yp,l.YG,l.Sm,l.PM,l.FN,l.wI,l.W2,l.fr,l.jY,l.Gu,l.gu,l.Xz,l.pK,l.Nd,l.wd,l.ho,l.sr,l.w,l.j9,l.cs],styles:['.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%}.container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{color:var(--active-color)}.container[_ngcontent-%COMP%]   ion-button.activateBtn[_ngcontent-%COMP%]{background-color:var(--middle-purple-color);color:var(--active-color)}.container[_ngcontent-%COMP%]   ion-button.trashBtn[_ngcontent-%COMP%]:hover{color:var(--red-color)}.timeCard[_ngcontent-%COMP%]:hover{cursor:pointer}ion-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}.marginVertical[_ngcontent-%COMP%]{margin:16px 0}.imgContainer[_ngcontent-%COMP%]{width:60px;height:60px;margin:auto}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.iconBack[_ngcontent-%COMP%]{background-image:url(/assets/feeling/empty.svg);background-color:transparent;background-position:center center;background-repeat:no-repeat;background-size:100% 100%}.feelingDiv[_ngcontent-%COMP%]:hover{cursor:pointer;transition:background-color .3s;background-color:#f9f9f9;border-radius:50%}ion-input#summary[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:15px}ion-input#summary[_ngcontent-%COMP%]:focus-within{border-color:var(--middle-purple-color);color:#000}.diaryTime[_ngcontent-%COMP%]{display:block;color:var(--gray-color);margin-bottom:-10px}.diaryBtns[_ngcontent-%COMP%]   .diaryBtn[_ngcontent-%COMP%]{margin:8px}.diaryBtns[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin-right:5px}.customBtn[_ngcontent-%COMP%]{color:var(--red-color)}.customBtn[_ngcontent-%COMP%]:hover{background-color:var(--middle-red-color)}.keywordBadge[_ngcontent-%COMP%]{margin:8px 4px;background-color:var(--keyword-color);border-radius:30px;color:#000}.keywordBadge[_ngcontent-%COMP%]:nth-child(1){background-color:var(--keyword-first-color)}.keywordBadge[_ngcontent-%COMP%]:hover, .keywordIcon[_ngcontent-%COMP%]:hover{cursor:pointer}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 0 10px;height:50px;width:90%}.footer-md[_ngcontent-%COMP%]:before{width:0;height:0}.toggle-switch[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;font-size:13px;width:100px;height:30px;background-color:#ccc;border-radius:15px;position:relative;transition:background-color .2s ease}.toggle-label[_ngcontent-%COMP%]:before{content:"";position:absolute;top:3px;left:3px;width:50px;height:24px;border-radius:15px;background-color:#fff;transition:transform .2s ease}.share[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:50%;height:100%;line-height:30px;text-align:center;color:#fff}.exclusive[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:50%;height:100%;line-height:30px;text-align:center;color:#555}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background-color:var(--active-color)}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]:before{transform:translate(45px)}@media only screen and (min-width: 319.98px){.imgContainer[_ngcontent-%COMP%]{width:50px;height:50px;margin:auto}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}}']}),i})();var x=p(5529);let P=(()=>{class i{constructor(t,n,r,s){this.modalCtrl=t,this.toastCtrl=n,this.calService=r,this.http=s,this._imgList=["happy","soso","good","excite","great","uneasy","sad","not_good","lonely","depressed","surprise","upset","unpleasant","idk","empty"],this._feelings=["\uc990\uac70\uc6cc","\uadf8\ub0e5 \uadf8\ub798","\uc88b\uc544!","\uc124\ub808","\ud589\ubcf5\ud574","\ubd88\uc548\ud574","\uc2ac\ud37c","\ubcc4\ub85c\uc57c","\uc678\ub85c\uc6cc","\uc6b0\uc6b8\ud574","\ub180\ub790\uc5b4","\ud654\ub0ac\uc5b4","\ubd88\ucf8c\ud574","\ubaa8\ub974\uaca0\uc5b4","\ube44\uc6cc\ub458\ub798"],this._today=new Date,this.journalData=new x.xQ,this.getJournalData$=this.journalData.asObservable()}get getImgList(){return this._imgList}get getFeelings(){return this._feelings}get getToday(){return{date:this._today,year:this._today.getFullYear(),monthIndex:this._today.getMonth(),weekDayNumber:0,dayNumber:this._today.getDate(),feelings:["none","none","none"],summary:"",diary:[{time:0,sentence:"aaa"}],keywords:[],recording:{}}}getFeelingName(t){if("none"===t)return"\ube44\uc6cc\ub458\ub798";for(let n=0;n<this._imgList.length;n++)if(this._imgList[n]===t.slice(1,t.length))return this._feelings[n]}createJournal(t=this.getToday){return(0,h.mG)(this,void 0,void 0,function*(){const n={message:"DayDiary",id_mail:"test@test.com",date:this.calService.getDateFormatted(t.date)};yield this.http.post("/api/DayDiary/",n,{headers:(new U.WM).set("Content-Type","application/json")}).toPromise().then(r=>{console.log("createJournal-1",r),"DataNotExist"!==r?(t.feelings=JSON.parse(r.feelings.replace(/'/g,'"')),t.summary=r.summary,t.diary=JSON.parse(r.diary.replace(/'/g,'"')),t.keywords=JSON.parse(r.keywords.replace(/'/g,'"'))):(t.summary="",t.diary=[],t.keywords=[]),this.modalCtrl.create({component:m,componentProps:{day:t},cssClass:"diaryModal"}).then(s=>(s.present(),s.onDidDismiss())).then(s=>{if("confirm"===s.role){this.journalData.next(s.data);const Z={message:"DiarySave",id_mail:"test@test.com",date:this.calService.getDateFormatted(s.data.date),feelings:s.data.feelings,summary:s.data.summary,diary:s.data.diary,keywords:s.data.keywords};console.log(Z),console.log("finalData feelings",Z.feelings),this.http.post("/api/DiarySave/",Z,{headers:(new U.WM).set("Content-Type","application/json")}).toPromise().then(B=>{console.log("createJournal-2",B),this.presentToast("\uac10\uc815 \uc801\ub9bd",t),this.calService.getCurrentMonth(this.getToday.monthIndex,this.getToday.year)}).catch(B=>{this.presentToast("\uac10\uc815 \uc801\ub9bd \uc2e4\ud328"),console.log(B)})}else console.log(s)})}).catch(r=>{console.log(r),this.modalCtrl.create({component:m,componentProps:{day:t},cssClass:"diaryModal"}).then(s=>(s.present(),s.onDidDismiss())).then(s=>{console.log(s)})})})}presentToast(t,n){return(0,h.mG)(this,void 0,void 0,function*(){const r=n?`${n.year}\ub144 ${n.monthIndex+1}\uc6d4 ${n.dayNumber}\uc77c\uc758`:"",s=yield this.toastCtrl.create({message:`\n      <p class="ion-text-center">\n      ${r}\n      ${t}\n      </p>\n      `,duration:2e3,cssClass:"journalToast"});yield s.present(),yield s.onDidDismiss()})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(l.IN),e.LFG(l.yF),e.LFG(ae.o),e.LFG(U.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5652:(ee,$,p)=>{p.r($),p.d($,{TabsPageModule:()=>w});var h=p(7590),e=p(9808),l=p(4182),E=p(1741),b=p(2096),K=p(2561);const C=[{path:"tabs",component:(()=>{class _{constructor(T,F){this.journalService=T,this.router=F}onCreateJournal(){if("/tabs/tab2"!==this.router.url)return this.router.navigateByUrl("/tabs/tab2");this.journalService.createJournal()}}return _.\u0275fac=function(T){return new(T||_)(b.Y36(K.m),b.Y36(E.F0))},_.\u0275cmp=b.Xpm({type:_,selectors:[["app-tabs"]],decls:14,vars:0,consts:[["slot","bottom",2,"contain","none"],["tab","tab1"],["src","./assets/feel_tab.svg"],["tab","tab2",1,"middle-tab",3,"click"],["src","./assets/feel_tab_active.svg"],["tab","tab3"],["name","square"]],template:function(T,F){1&T&&(b.TgZ(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),b._UZ(3,"ion-img",2),b.TgZ(4,"ion-label"),b._uU(5,"Tab 1"),b.qZA()(),b.TgZ(6,"ion-tab-button",3),b.NdJ("click",function(){return F.onCreateJournal()}),b._UZ(7,"ion-img",4),b.TgZ(8,"ion-label"),b._uU(9,"Tab 2"),b.qZA()(),b.TgZ(10,"ion-tab-button",5),b._UZ(11,"ion-icon",6),b.TgZ(12,"ion-label"),b._uU(13,"Tab 3"),b.qZA()()()())},dependencies:[h.gu,h.Xz,h.Q$,h.yq,h.ZU,h.UN],styles:[".middle-tab[_ngcontent-%COMP%]{height:70px;border-radius:50%;background:white;z-index:100;max-width:70px;color:#0265ac;border:4px solid #0076c9;margin-top:-18px;border:1px solid #FAFAFA;box-shadow:0 2px 15px #4e53572f}"]}),_})(),children:[{path:"tab1",loadChildren:()=>p.e(1835).then(p.bind(p,1835)).then(_=>_.Tab1PageModule)},{path:"tab2",loadChildren:()=>p.e(1913).then(p.bind(p,1913)).then(_=>_.Tab2PageModule)},{path:"tab3",loadChildren:()=>p.e(420).then(p.bind(p,420)).then(_=>_.Tab3PageModule)},{path:"",redirectTo:"/tabs/tab2",pathMatch:"full"}]},{path:"",redirectTo:"/tabs/tab1",pathMatch:"full"}];let y=(()=>{class _{}return _.\u0275fac=function(T){return new(T||_)},_.\u0275mod=b.oAB({type:_}),_.\u0275inj=b.cJS({imports:[E.Bz.forChild(C)]}),_})(),w=(()=>{class _{}return _.\u0275fac=function(T){return new(T||_)},_.\u0275mod=b.oAB({type:_}),_.\u0275inj=b.cJS({imports:[h.Pc,e.ez,l.u5,y]}),_})()}}]);