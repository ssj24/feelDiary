(self.webpackChunkapp=self.webpackChunkapp||[]).push([[797],{797:(I,v,a)=>{"use strict";a.r(v),a.d(v,{VoiceRecorderWeb:()=>U});var D=a(7423),c=a(5861),h=a(6351);const O=()=>new Error("FAILED_TO_RECORD"),b=()=>new Error("RECORDING_HAS_NOT_STARTED"),C=()=>new Error("FAILED_TO_FETCH_RECORDING"),_=["audio/aac","audio/webm;codecs=opus","audio/mp4","audio/webm","audio/ogg;codecs=opus"],g=()=>new Promise(()=>{});class p{constructor(){this.mediaRecorder=null,this.chunks=[],this.pendingResult=g()}static canDeviceVoiceRecord(){return(0,c.Z)(function*(){var i;return null==(null===(i=null==navigator?void 0:navigator.mediaDevices)||void 0===i?void 0:i.getUserMedia)||null==p.getSupportedMimeType()?{value:!1}:{value:!0}})()}startRecording(){var i=this;return(0,c.Z)(function*(){if(null!=i.mediaRecorder)throw new Error("ALREADY_RECORDING");if(!(yield p.canDeviceVoiceRecord()).value)throw new Error("DEVICE_CANNOT_VOICE_RECORD");if(!(yield p.hasAudioRecordingPermission().catch(()=>({value:!0}))).value)throw new Error("MISSING_PERMISSION");return navigator.mediaDevices.getUserMedia({audio:!0}).then(i.onSuccessfullyStartedRecording.bind(i)).catch(i.onFailedToStartRecording.bind(i)),{value:!0}})()}stopRecording(){var i=this;return(0,c.Z)(function*(){if(null==i.mediaRecorder)throw b();try{return i.mediaRecorder.stop(),i.mediaRecorder.stream.getTracks().forEach(R=>R.stop()),i.pendingResult}catch(R){throw C()}finally{i.prepareInstanceForNextOperation()}})()}static hasAudioRecordingPermission(){return(0,c.Z)(function*(){return navigator.permissions.query({name:"microphone"}).then(i=>({value:"granted"===i.state})).catch(()=>{throw new Error("COULD_NOT_QUERY_PERMISSION_STATUS")})})()}static requestAudioRecordingPermission(){return(0,c.Z)(function*(){return(yield p.hasAudioRecordingPermission().catch(()=>({value:!1}))).value?{value:!0}:navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>({value:!0})).catch(()=>({value:!1}))})()}pauseRecording(){if(null==this.mediaRecorder)throw b();return"recording"===this.mediaRecorder.state?(this.mediaRecorder.pause(),Promise.resolve({value:!0})):Promise.resolve({value:!1})}resumeRecording(){if(null==this.mediaRecorder)throw b();return"paused"===this.mediaRecorder.state?(this.mediaRecorder.resume(),Promise.resolve({value:!0})):Promise.resolve({value:!1})}getCurrentStatus(){return Promise.resolve(null==this.mediaRecorder?{status:"NONE"}:"recording"===this.mediaRecorder.state?{status:"RECORDING"}:"paused"===this.mediaRecorder.state?{status:"PAUSED"}:{status:"NONE"})}static getSupportedMimeType(){if(null==(null==MediaRecorder?void 0:MediaRecorder.isTypeSupported))return null;const i=_.find(R=>MediaRecorder.isTypeSupported(R));return null!=i?i:null}onSuccessfullyStartedRecording(i){var R=this;this.pendingResult=new Promise((L,S)=>{this.mediaRecorder=new MediaRecorder(i),this.mediaRecorder.onerror=()=>{S(O()),this.prepareInstanceForNextOperation()},this.mediaRecorder.onstop=(0,c.Z)(function*(){const N=p.getSupportedMimeType();if(null==N)S(C());else{const G=new Blob(R.chunks,{type:N}),Z=yield p.blobToBase64(G),B=yield(0,h.Z)(G);R.prepareInstanceForNextOperation(),L({value:{recordDataBase64:Z,mimeType:N,msDuration:1e3*B}})}}),this.mediaRecorder.ondataavailable=N=>this.chunks.push(N.data),this.mediaRecorder.start()})}onFailedToStartRecording(){throw this.prepareInstanceForNextOperation(),O()}static blobToBase64(i){return new Promise(R=>{const L=new FileReader;L.onloadend=()=>{const S=String(L.result),N=S.split("base64,");R((N.length>1?N[1]:S).trim())},L.readAsDataURL(i)})}prepareInstanceForNextOperation(){if(null!=this.mediaRecorder&&"recording"===this.mediaRecorder.state)try{this.mediaRecorder.stop()}catch(i){}this.pendingResult=g(),this.mediaRecorder=null,this.chunks=[]}}class U extends D.Uw{constructor(){super(...arguments),this.voiceRecorderInstance=new p}canDeviceVoiceRecord(){return p.canDeviceVoiceRecord()}hasAudioRecordingPermission(){return p.hasAudioRecordingPermission()}requestAudioRecordingPermission(){return p.requestAudioRecordingPermission()}startRecording(){return this.voiceRecorderInstance.startRecording()}stopRecording(){return this.voiceRecorderInstance.stopRecording()}pauseRecording(){return this.voiceRecorderInstance.pauseRecording()}resumeRecording(){return this.voiceRecorderInstance.resumeRecording()}getCurrentStatus(){return this.voiceRecorderInstance.getCurrentStatus()}}},6351:(I,v,a)=>{"use strict";var c=a(7957);v.Z=function f(m){return P.apply(this,arguments)};var h=c(a(6780)),l=c(a(5877));function P(){return(P=(0,l.default)(h.default.mark(function m(s){var u,O;return h.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return u=document.createElement("video"),O=new Promise(function(C,k){u.addEventListener("loadedmetadata",function(){u.duration===1/0?(u.currentTime=Number.MAX_SAFE_INTEGER,u.ontimeupdate=function(){u.ontimeupdate=null,C(u.duration),u.currentTime=0}):C(u.duration)}),u.onerror=function(_){return k(_.target.error)}}),u.src="string"==typeof s||s instanceof String?s:window.URL.createObjectURL(s),b.abrupt("return",O);case 4:case"end":return b.stop()}},m)}))).apply(this,arguments)}},7854:I=>{var v=function(a){"use strict";var h,D=Object.prototype,c=D.hasOwnProperty,l="function"==typeof Symbol?Symbol:{},f=l.iterator||"@@iterator",P=l.asyncIterator||"@@asyncIterator",m=l.toStringTag||"@@toStringTag";function s(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{s({},"")}catch(r){s=function(e,t,o){return e[t]=o}}function u(r,e,t,o){var d=Object.create((e&&e.prototype instanceof p?e:p).prototype),y=new Y(o||[]);return d._invoke=function Z(r,e,t){var o=b;return function(d,y){if(o===k)throw new Error("Generator is already running");if(o===_){if("throw"===d)throw y;return W()}for(t.method=d,t.arg=y;;){var w=t.delegate;if(w){var T=B(w,t);if(T){if(T===g)continue;return T}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(o===b)throw o=_,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);o=k;var E=O(r,e,t);if("normal"===E.type){if(o=t.done?_:C,E.arg===g)continue;return{value:E.arg,done:t.done}}"throw"===E.type&&(o=_,t.method="throw",t.arg=E.arg)}}}(r,t,y),d}function O(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(o){return{type:"throw",arg:o}}}a.wrap=u;var b="suspendedStart",C="suspendedYield",k="executing",_="completed",g={};function p(){}function U(){}function A(){}var i={};s(i,f,function(){return this});var R=Object.getPrototypeOf,L=R&&R(R(H([])));L&&L!==D&&c.call(L,f)&&(i=L);var S=A.prototype=p.prototype=Object.create(i);function N(r){["next","throw","return"].forEach(function(e){s(r,e,function(t){return this._invoke(e,t)})})}function G(r,e){function t(d,y,w,T){var E=O(r[d],r,y);if("throw"!==E.type){var j=E.arg,F=j.value;return F&&"object"==typeof F&&c.call(F,"__await")?e.resolve(F.__await).then(function(M){t("next",M,w,T)},function(M){t("throw",M,w,T)}):e.resolve(F).then(function(M){j.value=M,w(j)},function(M){return t("throw",M,w,T)})}T(E.arg)}var o;this._invoke=function n(d,y){function w(){return new e(function(T,E){t(d,y,T,E)})}return o=o?o.then(w,w):w()}}function B(r,e){var t=r.iterator[e.method];if(t===h){if(e.delegate=null,"throw"===e.method){if(r.iterator.return&&(e.method="return",e.arg=h,B(r,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=O(t,r.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,g;var n=o.arg;return n?n.done?(e[r.resultName]=n.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=h),e.delegate=null,g):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function Q(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function V(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function Y(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(Q,this),this.reset(!0)}function H(r){if(r){var e=r[f];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var t=-1,o=function n(){for(;++t<r.length;)if(c.call(r,t))return n.value=r[t],n.done=!1,n;return n.value=h,n.done=!0,n};return o.next=o}}return{next:W}}function W(){return{value:h,done:!0}}return U.prototype=A,s(S,"constructor",A),s(A,"constructor",U),U.displayName=s(A,m,"GeneratorFunction"),a.isGeneratorFunction=function(r){var e="function"==typeof r&&r.constructor;return!!e&&(e===U||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,A):(r.__proto__=A,s(r,m,"GeneratorFunction")),r.prototype=Object.create(S),r},a.awrap=function(r){return{__await:r}},N(G.prototype),s(G.prototype,P,function(){return this}),a.AsyncIterator=G,a.async=function(r,e,t,o,n){void 0===n&&(n=Promise);var d=new G(u(r,e,t,o),n);return a.isGeneratorFunction(e)?d:d.next().then(function(y){return y.done?y.value:d.next()})},N(S),s(S,m,"Generator"),s(S,f,function(){return this}),s(S,"toString",function(){return"[object Generator]"}),a.keys=function(r){var e=[];for(var t in r)e.push(t);return e.reverse(),function o(){for(;e.length;){var n=e.pop();if(n in r)return o.value=n,o.done=!1,o}return o.done=!0,o}},a.values=H,Y.prototype={constructor:Y,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(V),!r)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=h)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function t(T,E){return d.type="throw",d.arg=r,e.next=T,E&&(e.method="next",e.arg=h),!!E}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],d=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var y=c.call(n,"catchLoc"),w=c.call(n,"finallyLoc");if(y&&w){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(y){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!w)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&c.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===r||"continue"===r)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var d=n?n.completion:{};return d.type=r,d.arg=e,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(d)},complete:function(r,e){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&e&&(this.next=e),g},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),V(t),g}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var o=t.completion;if("throw"===o.type){var n=o.arg;V(t)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,t){return this.delegate={iterator:H(r),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=h),g}},a}(I.exports);try{regeneratorRuntime=v}catch(a){"object"==typeof globalThis?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}},5877:I=>{function v(D,c,h,l,f,P,m){try{var s=D[P](m),u=s.value}catch(O){return void h(O)}s.done?c(u):Promise.resolve(u).then(l,f)}I.exports=function a(D){return function(){var c=this,h=arguments;return new Promise(function(l,f){var P=D.apply(c,h);function m(u){v(P,l,f,m,s,"next",u)}function s(u){v(P,l,f,m,s,"throw",u)}m(void 0)})}}},7957:I=>{I.exports=function v(a){return a&&a.__esModule?a:{default:a}}},6780:(I,v,a)=>{I.exports=a(7854)}}]);